{
  "screenName": "DailyLoadScreen",
  "layout": "Vertical",
  "components": {
    "header": {
      "type": "Container",
      "orientation": "Horizontal",
      "components": {
        "title": {
          "type": "Label",
          "text": "Daily Load Management",
          "fontSize": 24,
          "fontWeight": "Semibold",
          "color": "varTextPrimary"
        }
      }
    },
    "statsCards": {
      "type": "Container",
      "orientation": "Horizontal",
      "components": {
        "totalLoads": {
          "type": "Rectangle",
          "fill": "varCardBackground",
          "borderRadius": 8,
          "width": "(Parent.Width - 40) / 3",
          "height": 100,
          "components": {
            "value": {
              "type": "Label",
              "text": "CountRows(DailyLoads)",
              "fontSize": 28,
              "fontWeight": "Semibold",
              "color": "varTextPrimary"
            },
            "label": {
              "type": "Label",
              "text": "Total Loads",
              "fontSize": 14,
              "color": "varTextSecondary"
            }
          }
        },
        "processedLoads": {
          "type": "Rectangle",
          "fill": "varCardBackground",
          "borderRadius": 8,
          "width": "(Parent.Width - 40) / 3",
          "height": 100,
          "components": {
            "value": {
              "type": "Label",
              "text": "CountRows(Filter(DailyLoads, Status = \"Processed\"))",
              "fontSize": 28,
              "fontWeight": "Semibold",
              "color": "varSuccessColor"
            },
            "label": {
              "type": "Label",
              "text": "Processed",
              "fontSize": 14,
              "color": "varTextSecondary"
            }
          }
        },
        "pendingLoads": {
          "type": "Rectangle",
          "fill": "varCardBackground",
          "borderRadius": 8,
          "width": "(Parent.Width - 40) / 3",
          "height": 100,
          "components": {
            "value": {
              "type": "Label",
              "text": "CountRows(Filter(DailyLoads, Status = \"Pending\"))",
              "fontSize": 28,
              "fontWeight": "Semibold",
              "color": "varWarningColor"
            },
            "label": {
              "type": "Label",
              "text": "Pending",
              "fontSize": 14,
              "color": "varTextSecondary"
            }
          }
        }
      }
    },
    "actionButtons": {
      "type": "Container",
      "orientation": "Horizontal",
      "components": {
        "processAllButton": {
          "type": "Button",
          "text": "Process All Pending",
          "fill": "varPrimaryColor",
          "color": "White",
          "onSelect": "ForAll(Filter(DailyLoads, Status = \"Pending\"), Patch(DailyLoads, ThisRecord, {Status: \"Processed\", ProcessedDate: Now(), ProcessedBy: User().FullName}))"
        },
        "refreshButton": {
          "type": "Button",
          "text": "Refresh",
          "fill": "Transparent",
          "borderColor": "varPrimaryColor",
          "color": "varPrimaryColor",
          "onSelect": "Refresh(DailyLoads)"
        }
      }
    },
    "loadsGallery": {
      "type": "Gallery",
      "items": "Sort(DailyLoads, CreatedDate, Descending)",
      "layout": "Vertical",
      "templateSize": 80,
      "template": {
        "background": {
          "type": "Rectangle",
          "fill": "varCardBackground",
          "borderRadius": 8
        },
        "customerName": {
          "type": "Label",
          "text": "ThisItem.CustomerName",
          "fontWeight": "Semibold",
          "color": "varTextPrimary",
          "x": 20,
          "y": 15
        },
        "recordCount": {
          "type": "Label",
          "text": "ThisItem.RecordCount & \" records\"",
          "color": "varTextSecondary",
          "x": 20,
          "y": 40
        },
        "statusBadge": {
          "type": "Rectangle",
          "fill": "If(ThisItem.Status = \"Processed\", RGBA(34, 197, 94, 0.2), RGBA(251, 191, 36, 0.2))",
          "borderRadius": 12,
          "width": 80,
          "height": 24,
          "x": "Parent.Width - 200",
          "y": 28,
          "components": {
            "statusLabel": {
              "type": "Label",
              "text": "ThisItem.Status",
              "color": "If(ThisItem.Status = \"Processed\", RGBA(34, 197, 94, 1), RGBA(251, 191, 36, 1))",
              "fontSize": 12,
              "align": "Center"
            }
          }
        },
        "processButton": {
          "type": "Button",
          "text": "Process",
          "fill": "varPrimaryColor",
          "color": "White",
          "width": 80,
          "height": 32,
          "x": "Parent.Width - 100",
          "y": 24,
          "visible": "ThisItem.Status = \"Pending\"",
          "onSelect": "Patch(DailyLoads, ThisItem, {Status: \"Processed\", ProcessedDate: Now(), ProcessedBy: User().FullName})"
        }
      }
    }
  }
}
